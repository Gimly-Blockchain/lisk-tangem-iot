<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="826px" preserveAspectRatio="none" style="width:1999px;height:826px;" version="1.1" viewBox="0 0 1999 826" width="1999px" zoomAndPan="magnify"><defs><filter height="300%" id="f1c5qy4oufs9lj" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[ead227b1f15782be967ad12754f7a231]
entity Sender--><ellipse cx="75" cy="358.5" fill="#FEFECE" filter="url(#f1c5qy4oufs9lj)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M75,366.5 L75,393.5 M62,374.5 L88,374.5 M75,393.5 L62,408.5 M75,393.5 L88,408.5 " fill="none" filter="url(#f1c5qy4oufs9lj)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="50" y="428.4951">Sender</text><!--MD5=[4123fcd7795bcaf721e2249b804eb70c]
entity Recipient--><ellipse cx="1655" cy="358.5" fill="#FEFECE" filter="url(#f1c5qy4oufs9lj)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1655,366.5 L1655,393.5 M1642,374.5 L1668,374.5 M1655,393.5 L1642,408.5 M1655,393.5 L1668,408.5 " fill="none" filter="url(#f1c5qy4oufs9lj)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="1622.5" y="428.4951">Recipient</text><!--MD5=[8e76afe5eb33396eb16e65cb9217ddc8]
entity Carrier--><ellipse cx="1071" cy="358.5" fill="#FEFECE" filter="url(#f1c5qy4oufs9lj)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1071,366.5 L1071,393.5 M1058,374.5 L1084,374.5 M1071,393.5 L1058,408.5 M1071,393.5 L1084,408.5 " fill="none" filter="url(#f1c5qy4oufs9lj)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="1048.5" y="428.4951">Carrier</text><!--MD5=[3f18111e124759ef4e0b42892c64d40a]
entity emptynode--><polygon fill="#FEFECE" filter="url(#f1c5qy4oufs9lj)" points="6,18,16,8,144,8,144,174.0781,134,184.0781,6,184.0781,6,18" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="134" x2="143" y1="18" y2="9"/><line style="stroke: #000000; stroke-width: 1.5;" x1="6" x2="134" y1="18" y2="18"/><line style="stroke: #000000; stroke-width: 1.5;" x1="134" x2="134" y1="18" y2="184.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="21" y="40.9951">Packet</text><line style="stroke: #000000; stroke-width: 1.0;" x1="6" x2="134" y1="44.2969" y2="44.2969"/><line style="stroke: #000000; stroke-width: 1.0;" x1="134" x2="144" y1="44.2969" y2="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="27" y="61.292">Account</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="6" x2="134" y1="68.5938" y2="68.5938"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="134" x2="144" y1="68.5938" y2="58.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="31" y="85.5889"/><line style="stroke: #000000; stroke-width: 1.0;" x1="6" x2="134" y1="92.8906" y2="92.8906"/><line style="stroke: #000000; stroke-width: 1.0;" x1="134" x2="144" y1="92.8906" y2="82.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="21" x="27" y="109.8857">IoT</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="6" x2="134" y1="117.1875" y2="117.1875"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="134" x2="144" y1="117.1875" y2="107.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="27" y="134.1826">Lightsensor</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="27" y="150.4795">Raspberry Pi</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="31" y="166.7764"/><!--MD5=[993ca174be86879988fb14a1259d1b3a]
entity initnode--><polygon fill="#FEFECE" filter="url(#f1c5qy4oufs9lj)" points="337,295.5,347,285.5,519,285.5,519,484.1719,509,494.1719,337,494.1719,337,295.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="509" x2="518" y1="295.5" y2="286.5"/><line style="stroke: #000000; stroke-width: 1.5;" x1="337" x2="509" y1="295.5" y2="295.5"/><line style="stroke: #000000; stroke-width: 1.5;" x1="509" x2="509" y1="295.5" y2="494.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="352" y="318.4951">Packet</text><line style="stroke: #000000; stroke-width: 1.0;" x1="337" x2="509" y1="321.7969" y2="321.7969"/><line style="stroke: #000000; stroke-width: 1.0;" x1="509" x2="519" y1="321.7969" y2="311.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="358" y="338.792">Account</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="337" x2="509" y1="346.0938" y2="346.0938"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="509" x2="519" y1="346.0938" y2="336.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="14" x="358" y="363.0889">ID</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="362" y="379.3857"/><line style="stroke: #000000; stroke-width: 1.0;" x1="337" x2="509" y1="386.6875" y2="386.6875"/><line style="stroke: #000000; stroke-width: 1.0;" x1="509" x2="519" y1="386.6875" y2="376.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="21" x="358" y="403.6826">IoT</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="337" x2="509" y1="410.9844" y2="410.9844"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="509" x2="519" y1="410.9844" y2="400.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="358" y="427.9795">Lightsensor</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="358" y="444.2764">Raspberry Pi</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="358" y="460.5732">Secret passphrase</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="362" y="476.8701"/><!--MD5=[0b70d51bdd028022f5101c089cfdd98e]
entity node--><polygon fill="#FEFECE" filter="url(#f1c5qy4oufs9lj)" points="731,263,741,253,913,253,913,516.8594,903,526.8594,731,526.8594,731,263" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="903" x2="912" y1="263" y2="254"/><line style="stroke: #000000; stroke-width: 1.5;" x1="731" x2="903" y1="263" y2="263"/><line style="stroke: #000000; stroke-width: 1.5;" x1="903" x2="903" y1="263" y2="526.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="746" y="285.9951">Packet</text><line style="stroke: #000000; stroke-width: 1.0;" x1="731" x2="903" y1="289.2969" y2="289.2969"/><line style="stroke: #000000; stroke-width: 1.0;" x1="903" x2="913" y1="289.2969" y2="279.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="752" y="306.292">Account</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="731" x2="903" y1="313.5938" y2="313.5938"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="903" x2="913" y1="313.5938" y2="303.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="14" x="752" y="330.5889">ID</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="752" y="346.8857">Sender</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="752" y="363.1826">Recipient</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="752" y="379.4795">minTrust</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="752" y="395.7764">Security</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="752" y="412.0732">Postage</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="756" y="428.3701"/><line style="stroke: #000000; stroke-width: 1.0;" x1="731" x2="903" y1="435.6719" y2="435.6719"/><line style="stroke: #000000; stroke-width: 1.0;" x1="903" x2="913" y1="435.6719" y2="425.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="21" x="752" y="452.667">IoT</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="731" x2="903" y1="459.9688" y2="459.9688"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="903" x2="913" y1="459.9688" y2="449.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="752" y="476.9639">Lightsensor</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="752" y="493.2607">Raspberry Pi</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="752" y="509.5576">Secret passphrase</text><!--MD5=[d4bb979d073464a818782f912af531d1]
entity node2--><polygon fill="#FEFECE" filter="url(#f1c5qy4oufs9lj)" points="1301,255,1311,245,1483,245,1483,525.1563,1473,535.1563,1301,535.1563,1301,255" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1473" x2="1482" y1="255" y2="246"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1301" x2="1473" y1="255" y2="255"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1473" x2="1473" y1="255" y2="535.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="1316" y="277.9951">Packet</text><line style="stroke: #000000; stroke-width: 1.0;" x1="1301" x2="1473" y1="281.2969" y2="281.2969"/><line style="stroke: #000000; stroke-width: 1.0;" x1="1473" x2="1483" y1="281.2969" y2="271.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="1322" y="298.292">Account</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="1301" x2="1473" y1="305.5938" y2="305.5938"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="1473" x2="1483" y1="305.5938" y2="295.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="14" x="1322" y="322.5889">ID</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="1322" y="338.8857">Sender</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="1322" y="355.1826">Recipient</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="1322" y="371.4795">Carrier</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="1322" y="387.7764">minTrust</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="1322" y="404.0732">Security</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="1322" y="420.3701">Postage</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="1326" y="436.667"/><line style="stroke: #000000; stroke-width: 1.0;" x1="1301" x2="1473" y1="443.9688" y2="443.9688"/><line style="stroke: #000000; stroke-width: 1.0;" x1="1473" x2="1483" y1="443.9688" y2="433.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="21" x="1322" y="460.9639">IoT</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="1301" x2="1473" y1="468.2656" y2="468.2656"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="1473" x2="1483" y1="468.2656" y2="458.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="1322" y="485.2607">Lightsensor</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="1322" y="501.5576">Raspberry Pi</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="1322" y="517.8545">Secret passphrase</text><ellipse cx="1164.9431" cy="647.6886" fill="#FEFECE" filter="url(#f1c5qy4oufs9lj)" rx="91.4431" ry="20.6886" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="1086.4431" y="652.3371">LightAlarmTransaction!</text><ellipse cx="1630.2471" cy="647.4494" fill="#FEFECE" filter="url(#f1c5qy4oufs9lj)" rx="70.2471" ry="16.4494" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="1576.7471" y="652.0979">Transport failed</text><ellipse cx="1828.7901" cy="647.258" fill="#FEFECE" filter="url(#f1c5qy4oufs9lj)" rx="79.2901" ry="18.258" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="129" x="1764.2901" y="651.9065">Transport success</text><path d="M179,60.5 L179,92 L144.082,96 L179,100 L179,131.0313 A0,0 0 0 0 179,131.0313 L495,131.0313 A0,0 0 0 0 495,131.0313 L495,70.5 L485,60.5 L179,60.5 A0,0 0 0 0 179,60.5 " fill="#FBFB77" filter="url(#f1c5qy4oufs9lj)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M485,60.5 L485,70.5 L495,70.5 L485,60.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="185" y="77.5669">A packet with precious cargo.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="189" y="92.6997"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="295" x="185" y="107.8325">Additional to the cargo, a small IoT device with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="283" x="185" y="122.9653">different sensors is stored inside the packet.</text><path d="M1030.5,752 L1030.5,807.3984 A0,0 0 0 0 1030.5,807.3984 L1299.5,807.3984 A0,0 0 0 0 1299.5,807.3984 L1299.5,762 L1289.5,752 L1169,752 L1165,668.125 L1161,752 L1030.5,752 A0,0 0 0 0 1030.5,752 " fill="#FBFB77" filter="url(#f1c5qy4oufs9lj)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1289.5,752 L1289.5,762 L1299.5,762 L1289.5,752 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="1036.5" y="769.0669">status: alarm</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1040.5" y="784.1997"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="1036.5" y="799.3325">Save current timestamp to alarms-list.</text><path d="M1343,744 L1343,814.5313 A0,0 0 0 0 1343,814.5313 L1649,814.5313 A0,0 0 0 0 1649,814.5313 L1649,754 L1639,744 L1536.2623,744 L1613.569,663.6858 L1528.2623,744 L1343,744 A0,0 0 0 0 1343,744 " fill="#FBFB77" filter="url(#f1c5qy4oufs9lj)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1639,744 L1639,754 L1649,754 L1639,744 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="1349" y="761.0669">status: fail</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1353" y="776.1997"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="285" x="1349" y="791.3325">Send Postage + Security to Sender balance.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="1349" y="806.4653">Reduce trust of Carrier by -1.</text><path d="M1684.5,744 L1684.5,814.5313 A0,0 0 0 0 1684.5,814.5313 L1987.5,814.5313 A0,0 0 0 0 1987.5,814.5313 L1987.5,754 L1977.5,744 L1838.1079,744 L1829.9881,666.1324 L1830.1079,744 L1684.5,744 A0,0 0 0 0 1684.5,744 " fill="#FBFB77" filter="url(#f1c5qy4oufs9lj)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1977.5,744 L1977.5,754 L1987.5,754 L1977.5,744 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="1690.5" y="761.0669">status: success</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1694.5" y="776.1997"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="282" x="1690.5" y="791.3325">Send Postage + Security to Carrier balance.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="1690.5" y="806.4653">Increase trust of Carrier by +1.</text><path d="M610,620 L610,675.3984 A0,0 0 0 0 610,675.3984 L1034,675.3984 A0,0 0 0 0 1034,675.3984 L1034,630 L1024,620 L826,620 L822,527.0432 L818,620 L610,620 A0,0 0 0 0 610,620 " fill="#FBFB77" filter="url(#f1c5qy4oufs9lj)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1024,620 L1024,630 L1034,630 L1024,620 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="616" y="637.0669">status: pending</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="620" y="652.1997"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="403" x="616" y="667.3325">Transfer postage from the  senders account to packet balance.</text><path d="M1291.5,612 L1291.5,682.5313 A0,0 0 0 0 1291.5,682.5313 L1516.5,682.5313 A0,0 0 0 0 1516.5,682.5313 L1516.5,622 L1506.5,612 L1406.338,612 L1398.7715,535.3058 L1398.338,612 L1291.5,612 A0,0 0 0 0 1291.5,612 " fill="#FBFB77" filter="url(#f1c5qy4oufs9lj)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1506.5,612 L1506.5,622 L1516.5,622 L1506.5,612 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="1297.5" y="629.0669">status: ongoing</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1301.5" y="644.1997"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="1297.5" y="659.3325">Add carrier to packet account.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="1297.5" y="674.4653">Lock Security in carrier account.</text><!--MD5=[e055276647604ccaa2da030fdd3d6b9f]
link emptynode to Sender--><path d="M75,184.2097 C75,236.3827 75,300.385 75,343.0265 " fill="none" id="emptynode-&gt;Sender" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="75,348.1185,79,339.1185,75,343.1185,71,339.1185,75,348.1185" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[9e15a6808c0d3e6919611510c422654f]
link Sender to initnode--><path d="M100.1039,390 C147.6523,390 253.1158,390 331.6727,390 " fill="none" id="Sender-&gt;initnode" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="336.8073,390,327.8073,386,331.8073,390,327.8073,394,336.8073,390" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="129.5" y="368.0669">Initialize the packet account</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="118.5" y="383.1997">Store passphrase on IoT device</text><!--MD5=[6c9a9ffeee17b37ec5588653ed2ba74e]
link initnode to node--><path d="M519.3818,390 C581.1825,390 662.6717,390 725.5179,390 " fill="none" id="initnode-&gt;node" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="730.7731,390,721.7731,386,725.7731,390,721.7731,394,730.7731,390" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="537.5" y="383.0669">Register packet transaction</text><!--MD5=[2bdfbc614a4a48432b477ce2d12ebf43]
link node to Carrier--><path d="M913.3045,390 C959.3583,390 1011.9496,390 1043.2636,390 " fill="none" id="node-&gt;Carrier" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1048.4792,390,1039.4792,386,1043.4792,390,1039.4792,394,1048.4792,390" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="931.25" y="383.0669">Gives packet to</text><!--MD5=[3456556a0c5e63b51533dace4ee5e664]
link Carrier to node2--><path d="M1093.5721,390 C1134.9629,390 1225.2257,390 1295.7077,390 " fill="none" id="Carrier-&gt;node2" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1300.7473,390,1291.7473,386,1295.7473,390,1291.7473,394,1300.7473,390" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="1111.75" y="383.0669">Start transport transaction</text><!--MD5=[bc4769c29a5baaf25ef08548d3dff4b0]
link node2 to LightAlarmTransaction!--><path d="M1300.9784,493.2514 C1258.954,540.9222 1212.6468,593.4513 1186.3653,623.2641 " fill="none" id="node2-&gt;LightAlarmTransaction!" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1182.9486,627.1398,1191.9008,623.0339,1186.2551,623.3892,1185.8998,617.7435,1182.9486,627.1398" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="1234" y="578.0669">If packet is opened</text><!--MD5=[66655d3f5e7572fcefe702538fbf15a7]
link node2 to Recipient--><path d="M1483.2465,390 C1529.2036,390 1582.4199,390 1617.2896,390 " fill="none" id="node2-&gt;Recipient" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1622.2982,390,1613.2982,386,1617.2982,390,1613.2982,394,1622.2982,390" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="1501.25" y="383.0669">Receives packet</text><!--MD5=[321998272bd1fedd6b1900ce69e4d447]
link Recipient to Transport failed--><path d="M1650.9555,431.658 C1645.5882,486.9413 1636.3054,582.5541 1632.136,625.499 " fill="none" id="Recipient-&gt;Transport failed" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1631.6298,630.7129,1636.481,622.1417,1632.1131,625.7363,1628.5184,621.3684,1631.6298,630.7129" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="1639" y="578.0669">FinishTransport: fail</text><!--MD5=[af84d43c12364718849d3c23365d14f9]
link Recipient to Transport success--><path d="M1683.1495,431.658 C1720.3453,486.7036 1784.5591,581.7326 1813.757,624.9422 " fill="none" id="Recipient-&gt;Transport success" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1816.6389,629.207,1814.9142,619.5103,1813.8395,625.0641,1808.2857,623.9894,1816.6389,629.207" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="1784" y="578.0669">FinishTransport: success</text><!--MD5=[7838dbb4bd2fed236a7275957476785a]
@startuml
actor Sender
actor Recipient
actor Carrier

node emptynode [
<b>Packet
- - - -
Account
  ....
  
- - - -
IoT
....
Lightsensor
Raspberry Pi

]

node initnode [
<b>Packet
- - - -
Account
  ....
  ID
  
- - - -
IoT
....
Lightsensor
Raspberry Pi
Secret passphrase

]


node node [
<b>Packet
- - - -
Account
  ....
  ID
  Sender
  Recipient
  minTrust
  Security
  Postage
  
- - - -
IoT
....
Lightsensor
Raspberry Pi
Secret passphrase
]

node node2 [
<b>Packet
- - - -
Account
  ....
  ID
  Sender
  Recipient
  Carrier
  minTrust
  Security
  Postage
  
- - - -
IoT
....
Lightsensor
Raspberry Pi
Secret passphrase
]

emptynode - -> Sender 
Sender -> initnode : Initialize the packet account\nStore passphrase on IoT device
initnode -> node : Register packet transaction
node -> Carrier : Gives packet to
Carrier -> node2 : Start transport transaction
node2 - -> (LightAlarmTransaction!) : If packet is opened
node2 -> Recipient : Receives packet
Recipient - -> (Transport failed) : FinishTransport: fail
Recipient - -> (Transport success) : FinishTransport: success

note right of emptynode
  A packet with precious cargo.

  Additional to the cargo, a small IoT device with
  different sensors is stored inside the packet.
end note

note bottom of (LightAlarmTransaction!)
  status: alarm

  Save current timestamp to alarms-list.
end note

note bottom of (Transport failed)
  status: fail
  
  Send Postage + Security to Sender balance.
  Reduce trust of Carrier by -1.
end note

note bottom of (Transport success)
  status: success
  
  Send Postage + Security to Carrier balance.
  Increase trust of Carrier by +1.
end note

note bottom of node
  status: pending

  Transfer postage from the  senders account to packet balance.
end note

note bottom of node2
  status: ongoing

  Add carrier to packet account.
  Lock Security in carrier account.
end note
@enduml

PlantUML version 1.2019.10(Fri Sep 13 20:53:03 UTC 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_222-heroku-b10
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>